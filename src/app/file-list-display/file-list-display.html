<div class="file-filter-container">
  <h3 class="filter-title">סינון ומיון קבצים</h3>

  <div class="filter-section">
    <div class="filter-group">
      <label for="filterCategoryInput" class="filter-label">סנן לפי קטגוריה:</label>
      <input type="text" id="filterCategoryInput" [(ngModel)]="filterCategory" class="filter-input"
        placeholder="כל הקטגוריות">
    </div>

    <div class="filter-group">
      <label for="filterYearInput" class="filter-label">סנן לפי שנה:</label>
      <input type="number" id="filterYearInput" [(ngModel)]="filterYear" class="filter-input" placeholder="כל השנים">
    </div>

    <button class="filter-button apply-button" (click)="applyFilters()">סנן</button>
    <button class="filter-button clear-button" (click)="clearFilters()">נקה סינון</button>
  </div>

  <div class="sort-section">
    <div class="filter-group">
      <label for="sortColumn" class="filter-label">מיין לפי:</label>
      <select id="sortColumn" [(ngModel)]="sortColumn" class="filter-input">
        <option value="upload_date">תאריך העלאה</option>
        <option value="filename">שם קובץ</option>
        <option value="category">קטגוריה</option>
        <option value="year">שנה</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="sortDirection" class="filter-label">כיוון מיון:</label>
      <select id="sortDirection" [(ngModel)]="sortDirection" class="filter-input">
        <option value="asc">עולה (A-Z, 1-9)</option>
        <option value="desc">יורד (Z-A, 9-1)</option>
      </select>
    </div>

    <button class="filter-button sort-button" (click)="applySort()">מיין</button>
  </div>

  <h3 class="filter-title">רשימת קבצים</h3>
  <ul class="file-list">
    <li *ngFor="let file of displayedFiles" class="file-item">
      <div class="file-details">
        <a class="file-link" [href]="'https://python-app-or3e.onrender.com/files/' + file.filename" target="_blank">
          <span>{{ file.filename }}</span>
        </a>
        <div class="file-meta">
          <span *ngIf="file.category">קטגוריה: {{ file.category }}</span> |
          <span *ngIf="file.year">שנה: {{ file.year }}</span> |
          <span *ngIf="file.upload_date">תאריך העלאה: {{ file.upload_date | date:'yyyy-MM-dd' }}</span>|
          <span>{{ getUserNameById(file.uploaded_by) }}</span>
        </div>
      </div>

      <div class="file-actions">
        <a class="action-button view-button" [href]="'https://python-app-or3e.onrender.com/files/' + file.filename"
          target="_blank">צפה</a>
        <button *ngIf="isAdmin" class="action-button delete-button" (click)="deleteFile(file.id)">מחק</button>
      </div>
    </li>

    <li *ngIf="displayedFiles.length === 0" class="empty-message">
      אין קבצים להצגה התואמים לסינון.
    </li>
  </ul>
</div>